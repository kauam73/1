<!-- autocomplete.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Autocomplete API</title>
</head>
<body>
<pre id="output">Carregando...</pre>

<script>
  // Lista de animais
  const chaves = [
    "gato", "cachorro", "coelho", "leao", "tigre", "elefante", "girafa", "ursopardo",
    "golfinho", "baleiaazul", "tubaraobranco", "pinguimimperador", "corujaburaqueira",
    "aguiaamericana", "cobracoral", "jacarede papoamarelo", "sapocururu", "lagartixadeparede",
    "formigacortadeira", "abelhaeuropeia", "borboletamonarca", "aranhaviúvanegra", "estreladomar",
    "polvocomum", "medusajubadeleao", "lulagigante", "caracoldejardim", "minhocacomum",
    "lombriga", "planaria", "esponjadomar", "macacoprego", "lobocinza", "hipopotamo",
    "rinocerontebranco", "canguruvermelho", "zebra", "guepardo", "pandagigante", "ornitorrinco",
    "morcegofruteiro", "camaleao", "iguanaverde", "tartarugamarinhaverde", "peruselvagem", "pavao",
    "cisnebranco", "louvadeus", "escaravelhorolabosta", "grilodomestico", "lulavampiro",
    "peixepalhaco", "cavalinho", "tubaraomartelo", "coralcerebro", "peixeboi", "patodomestico",
    "pombodomestico", "salamandratigre", "axolote", "tatubola", "coala", "diabodatasma",
    "aguiareal", "gaviaoreal", "picapau"
  ];

  // Normalizador básico (remove acentos e espaços)
  const normalizar = str => str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/\s/g, "").toLowerCase();

  // Pega a query 'a'
  const params = new URLSearchParams(location.search);
  const query = normalizar(params.get("a") || "");

  let resultado;

  if (!query) {
    resultado = { erro: "Parâmetro 'a' está vazio. Use ?a=prefixo ou ?a=* para tudo." };
  } else if (query === "*") {
    resultado = chaves;
  } else {
    const chavesNormalizadas = chaves.map(normalizar);
    resultado = chaves.filter((item, i) => chavesNormalizadas[i].startsWith(query));
    if (resultado.length === 0) {
      resultado = { mensagem: `Nenhum animal encontrado começando com "${params.get("a")}".` };
    }
  }

  // Mostrar JSON puro
  document.body.innerHTML = `<pre>${JSON.stringify(resultado, null, 2)}</pre>`;
</script>
</body>
</html>